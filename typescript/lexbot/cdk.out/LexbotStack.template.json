{
 "Resources": {
  "BotRuntimeRoleA485A341": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lexv2.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AmazonLexFullAccess"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "LexbotStack/BotRuntimeRole/Resource"
   }
  },
  "BookTripTemplateBot": {
   "Type": "AWS::Lex::Bot",
   "Properties": {
    "AutoBuildBotLocales": false,
    "BotLocales": [
     {
      "Description": "Book a trip bot Locale",
      "Intents": [
       {
        "Description": "Intent to book a car on StayBooker",
        "IntentConfirmationSetting": {
         "DeclinationResponse": {
          "AllowInterrupt": false,
          "MessageGroupsList": [
           {
            "Message": {
             "PlainTextMessage": {
              "Value": "Okay, I have cancelled your reservation in progress."
             }
            }
           }
          ]
         },
         "PromptSpecification": {
          "AllowInterrupt": false,
          "MaxRetries": 3,
          "MessageGroupsList": [
           {
            "Message": {
             "PlainTextMessage": {
              "Value": "Okay, I have you down for a {CarType} rental in {PickUpCity} from {PickUpDate} to {ReturnDate}.  Should I book the reservation?"
             }
            }
           }
          ]
         }
        },
        "Name": "BookCar",
        "SampleUtterances": [
         {
          "Utterance": "Book a car"
         },
         {
          "Utterance": "Reserve a car"
         },
         {
          "Utterance": "Make a car reservation"
         }
        ],
        "SlotPriorities": [
         {
          "Priority": 4,
          "SlotName": "DriverAge"
         },
         {
          "Priority": 1,
          "SlotName": "PickUpCity"
         },
         {
          "Priority": 3,
          "SlotName": "ReturnDate"
         },
         {
          "Priority": 5,
          "SlotName": "CarType"
         },
         {
          "Priority": 2,
          "SlotName": "PickUpDate"
         }
        ],
        "Slots": [
         {
          "Description": "something",
          "Name": "PickUpCity",
          "SlotTypeName": "AMAZON.City",
          "ValueElicitationSetting": {
           "PromptSpecification": {
            "AllowInterrupt": false,
            "MaxRetries": 3,
            "MessageGroupsList": [
             {
              "Message": {
               "PlainTextMessage": {
                "Value": "In what city do you need to rent a car?"
               }
              }
             }
            ]
           },
           "SlotConstraint": "Required"
          }
         },
         {
          "Description": "something",
          "Name": "PickUpDate",
          "SlotTypeName": "AMAZON.Date",
          "ValueElicitationSetting": {
           "PromptSpecification": {
            "AllowInterrupt": false,
            "MaxRetries": 3,
            "MessageGroupsList": [
             {
              "Message": {
               "PlainTextMessage": {
                "Value": "What day do you want to start your rental?"
               }
              }
             }
            ]
           },
           "SlotConstraint": "Required"
          }
         },
         {
          "Description": "something",
          "Name": "ReturnDate",
          "SlotTypeName": "AMAZON.Date",
          "ValueElicitationSetting": {
           "PromptSpecification": {
            "AllowInterrupt": false,
            "MaxRetries": 3,
            "MessageGroupsList": [
             {
              "Message": {
               "PlainTextMessage": {
                "Value": "What day do you want to return the car?"
               }
              }
             }
            ]
           },
           "SlotConstraint": "Required"
          }
         },
         {
          "Description": "something",
          "Name": "DriverAge",
          "SlotTypeName": "AMAZON.Number",
          "ValueElicitationSetting": {
           "PromptSpecification": {
            "AllowInterrupt": false,
            "MaxRetries": 3,
            "MessageGroupsList": [
             {
              "Message": {
               "PlainTextMessage": {
                "Value": "How old is the driver for this rental?"
               }
              }
             }
            ]
           },
           "SlotConstraint": "Required"
          }
         },
         {
          "Description": "something",
          "Name": "CarType",
          "SlotTypeName": "CarTypeValues",
          "ValueElicitationSetting": {
           "PromptSpecification": {
            "AllowInterrupt": false,
            "MaxRetries": 3,
            "MessageGroupsList": [
             {
              "Message": {
               "PlainTextMessage": {
                "Value": "What type of car would you like to rent?  Our most popular options are economy, midsize, and luxury"
               }
              }
             }
            ]
           },
           "SlotConstraint": "Required"
          }
         }
        ]
       },
       {
        "Description": "Intent to book a hotel on StayBooker",
        "IntentConfirmationSetting": {
         "DeclinationResponse": {
          "AllowInterrupt": true,
          "MessageGroupsList": [
           {
            "Message": {
             "PlainTextMessage": {
              "Value": "Okay, I have cancelled your reservation in progress."
             }
            }
           }
          ]
         },
         "PromptSpecification": {
          "AllowInterrupt": false,
          "MaxRetries": 3,
          "MessageGroupsList": [
           {
            "Message": {
             "PlainTextMessage": {
              "Value": "Okay, I have you down for a {Nights} night stay in {Location} starting {CheckInDate}.  Shall I book the reservation?"
             }
            }
           }
          ]
         }
        },
        "Name": "BookHotel",
        "SampleUtterances": [
         {
          "Utterance": "Book a hotel"
         },
         {
          "Utterance": "I want a make hotel reservations"
         },
         {
          "Utterance": "Book a {Nights} night stay in {Location}"
         }
        ],
        "SlotPriorities": [
         {
          "Priority": 4,
          "SlotName": "RoomType"
         },
         {
          "Priority": 1,
          "SlotName": "Location"
         },
         {
          "Priority": 3,
          "SlotName": "Nights"
         },
         {
          "Priority": 2,
          "SlotName": "CheckInDate"
         }
        ],
        "Slots": [
         {
          "Description": "something",
          "Name": "Location",
          "SlotTypeName": "AMAZON.City",
          "ValueElicitationSetting": {
           "PromptSpecification": {
            "AllowInterrupt": false,
            "MaxRetries": 3,
            "MessageGroupsList": [
             {
              "Message": {
               "PlainTextMessage": {
                "Value": "What city will you be staying in?"
               }
              }
             }
            ]
           },
           "SlotConstraint": "Required"
          }
         },
         {
          "Description": "something",
          "Name": "CheckInDate",
          "SlotTypeName": "AMAZON.Date",
          "ValueElicitationSetting": {
           "PromptSpecification": {
            "AllowInterrupt": false,
            "MaxRetries": 3,
            "MessageGroupsList": [
             {
              "Message": {
               "PlainTextMessage": {
                "Value": "What day do you want to check in?"
               }
              }
             }
            ]
           },
           "SlotConstraint": "Required"
          }
         },
         {
          "Description": "something",
          "Name": "Nights",
          "SlotTypeName": "AMAZON.Number",
          "ValueElicitationSetting": {
           "PromptSpecification": {
            "AllowInterrupt": false,
            "MaxRetries": 3,
            "MessageGroupsList": [
             {
              "Message": {
               "PlainTextMessage": {
                "Value": "How many nights will you be staying?"
               }
              }
             }
            ]
           },
           "SlotConstraint": "Required"
          }
         },
         {
          "Description": "something",
          "Name": "RoomType",
          "SlotTypeName": "RoomTypeValues",
          "ValueElicitationSetting": {
           "PromptSpecification": {
            "AllowInterrupt": false,
            "MaxRetries": 3,
            "MessageGroupsList": [
             {
              "Message": {
               "PlainTextMessage": {
                "Value": "What type of room would you like, queen, king or deluxe?"
               }
              }
             }
            ]
           },
           "SlotConstraint": "Required"
          }
         }
        ]
       },
       {
        "Description": "Default intent when no other intent matches",
        "Name": "FallbackIntent",
        "ParentIntentSignature": "AMAZON.FallbackIntent"
       }
      ],
      "LocaleId": "en_US",
      "NluConfidenceThreshold": 0.4,
      "SlotTypes": [
       {
        "Description": "Slot Type description",
        "Name": "CarTypeValues",
        "SlotTypeValues": [
         {
          "SampleValue": {
           "Value": "economy"
          }
         },
         {
          "SampleValue": {
           "Value": "standard"
          }
         },
         {
          "SampleValue": {
           "Value": "midsize"
          }
         },
         {
          "SampleValue": {
           "Value": "full size"
          }
         },
         {
          "SampleValue": {
           "Value": "luxury"
          }
         },
         {
          "SampleValue": {
           "Value": "minivan"
          }
         }
        ],
        "ValueSelectionSetting": {
         "ResolutionStrategy": "ORIGINAL_VALUE"
        }
       },
       {
        "Description": "Slot Type description",
        "Name": "RoomTypeValues",
        "SlotTypeValues": [
         {
          "SampleValue": {
           "Value": "queen"
          }
         },
         {
          "SampleValue": {
           "Value": "king"
          }
         },
         {
          "SampleValue": {
           "Value": "deluxe"
          }
         }
        ],
        "ValueSelectionSetting": {
         "ResolutionStrategy": "ORIGINAL_VALUE"
        }
       }
      ],
      "VoiceSettings": {
       "VoiceId": "Ivy"
      }
     }
    ],
    "DataPrivacy": {
     "ChildDirected": false
    },
    "Description": "How to create a BookTrip bot with CDK",
    "IdleSessionTTLInSeconds": 300,
    "Name": "BookTripWithCFN",
    "RoleArn": {
     "Fn::GetAtt": [
      "BotRuntimeRoleA485A341",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "LexbotStack/BookTripTemplateBot"
   }
  },
  "BookTripBotVersionWithCFN": {
   "Type": "AWS::Lex::BotVersion",
   "Properties": {
    "BotId": {
     "Ref": "BookTripTemplateBot"
    },
    "BotVersionLocaleSpecification": [
     {
      "BotVersionLocaleDetails": {
       "SourceBotVersion": "DRAFT"
      },
      "LocaleId": "en_US"
     }
    ],
    "Description": "BookTrip Version"
   },
   "Metadata": {
    "aws:cdk:path": "LexbotStack/BookTripBotVersionWithCFN"
   }
  },
  "FirstBotAliasWithCFN": {
   "Type": "AWS::Lex::BotAlias",
   "Properties": {
    "BotAliasName": "BookTripVersion1Alias",
    "BotId": {
     "Ref": "BookTripTemplateBot"
    },
    "BotVersion": {
     "Fn::GetAtt": [
      "BookTripBotVersionWithCFN",
      "BotVersion"
     ]
    },
    "SentimentAnalysisSettings": {
     "DetectSentiment": true
    }
   },
   "Metadata": {
    "aws:cdk:path": "LexbotStack/FirstBotAliasWithCFN"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/y2LwQrCMBBEv6X3zVoVBI/qH6TgVWK6wrZpAtlUhZB/N5LCwJs3MAc8H7HvzEeUHWfl+Il5SMbOUKdHZrNg1sER3F7+zwKOvpirXUOChjtF4eA3uzg2UgpokrBG255bL+DDSDjJ7r0/YU3fTcKs4uoTL4S68QfNzEGUlQAAAA=="
   },
   "Metadata": {
    "aws:cdk:path": "LexbotStack/CDKMetadata/Default"
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}